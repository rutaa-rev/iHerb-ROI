<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>iHerb ‚Äì Performance Benchmark</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

  :root {
    --iherb: #3B7D23;
    --iherb-light: #4A9B2E;
    --highlight-yellow: #FFF9E0;
    --highlight-yellow-border: #F5D867;
    --highlight-green: #E8F5E2;
    --highlight-green-text: #2D6A1E;
    --white: #FFFFFF;
    --g50: #F9FAFB; --g100: #F3F4F6; --g200: #E5E7EB; --g300: #D1D5DB;
    --g400: #9CA3AF; --g500: #6B7280; --g600: #4B5563; --g700: #374151;
    --g800: #1F2937; --g900: #111827;
    --blue: #3B82F6; --blue-bg: #EFF6FF;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Inter', -apple-system, sans-serif;
    background: var(--white); color: var(--g900);
  }

  .container { max-width: 1100px; margin: 0 auto; padding: 36px 24px 72px; }

  .header {
    display: flex; align-items: center; justify-content: space-between;
    margin-bottom: 8px; flex-wrap: wrap; gap: 12px;
  }
  .header-left { display: flex; align-items: center; gap: 14px; }
  .ada-logo { font-size: 22px; font-weight: 800; color: var(--g800); }
  .pipe { color: var(--g300); font-weight: 300; font-size: 20px; }
  .iherb-logo { font-size: 20px; font-weight: 700; color: var(--iherb); }
  .badge {
    padding: 5px 14px; border-radius: 6px; font-size: 11px; font-weight: 700;
    background: var(--iherb); color: white; letter-spacing: 0.8px; text-transform: uppercase;
  }

  h1 { font-size: 30px; font-weight: 800; letter-spacing: -0.8px; margin-bottom: 4px; }
  .subtitle { font-size: 14px; color: var(--g500); margin-bottom: 36px; }
  .subtitle strong { color: var(--g700); }

  /* Legend */
  .legend {
    display: flex; gap: 24px; margin-bottom: 28px; flex-wrap: wrap;
  }
  .legend-item { display: flex; align-items: center; gap: 8px; font-size: 13px; color: var(--g600); }
  .legend-swatch {
    width: 32px; height: 16px; border-radius: 4px; border: 1px solid var(--g200);
  }
  .swatch-yellow { background: var(--highlight-yellow); border-color: var(--highlight-yellow-border); }
  .swatch-green { background: var(--highlight-green); border-color: #A3D98F; }

  /* Section */
  .section-header {
    display: flex; align-items: center; gap: 10px; margin-bottom: 14px; margin-top: 44px;
  }
  .section-header:first-of-type { margin-top: 0; }
  .section-icon {
    width: 30px; height: 30px; border-radius: 8px; display: flex;
    align-items: center; justify-content: center; font-size: 14px;
  }
  .icon-green { background: #EFF8EB; color: var(--iherb); }
  .icon-blue { background: var(--blue-bg); color: var(--blue); }
  .section-title { font-size: 17px; font-weight: 700; color: var(--g800); }
  .section-desc { font-size: 12px; color: var(--g400); margin-left: auto; }

  /* Table */
  .table-wrap {
    background: var(--white); border: 1px solid var(--g200);
    border-radius: 10px; overflow: hidden; margin-bottom: 8px;
  }
  table { width: 100%; border-collapse: collapse; }
  thead th {
    padding: 11px 14px; font-size: 11px; font-weight: 700; text-transform: uppercase;
    letter-spacing: 0.5px; color: var(--g400); background: var(--g50);
    border-bottom: 1px solid var(--g200); text-align: left; white-space: nowrap;
  }
  tbody td {
    padding: 12px 14px; font-size: 14px; color: var(--g700);
    border-bottom: 1px solid var(--g100); font-weight: 500;
  }
  tbody tr:last-child td { border-bottom: none; }

  /* iHerb row = yellow */
  tr.row-iherb td {
    background: var(--highlight-yellow) !important;
    font-weight: 700; color: var(--g900);
  }
  tr.row-iherb td:first-child {
    border-left: 3px solid var(--highlight-yellow-border); padding-left: 11px;
  }

  /* Top performer cell = green */
  td.cell-best {
    background: var(--highlight-green) !important;
    color: var(--highlight-green-text) !important;
    font-weight: 700 !important;
  }
  /* When iHerb IS the top performer, green wins */
  tr.row-iherb td.cell-best {
    background: var(--highlight-green) !important;
    color: var(--highlight-green-text) !important;
  }

  .rank {
    width: 24px; height: 24px; border-radius: 50%; display: inline-flex;
    align-items: center; justify-content: center; font-size: 11px; font-weight: 700;
    background: var(--g100); color: var(--g400);
  }
  .rank-iherb { background: var(--highlight-yellow-border); color: #7A5D00; }

  .footnote {
    font-size: 12px; color: var(--g400); padding-left: 2px; margin-bottom: 0;
  }

  .footer {
    text-align: center; margin-top: 48px; padding-top: 24px;
    border-top: 1px solid var(--g200);
  }
  .footer p { font-size: 12px; color: var(--g400); }
  .footer a { color: var(--iherb); text-decoration: none; font-weight: 600; }

  @media (max-width: 768px) {
    .table-wrap { overflow-x: auto; }
    table { min-width: 680px; }
  }
</style>
</head>
<body>
<div class="container">

  <div class="header">
    <div class="header-left">
      <div class="ada-logo">ada</div>
      <span class="pipe">|</span>
      <span class="iherb-logo">iHerb</span>
    </div>
    <div class="badge">Performance Benchmark</div>
  </div>
  <h1>How does iHerb compare?</h1>
  <p class="subtitle">Last 30 days ¬∑ Data sourced from <strong>Ada Analytics</strong></p>

  <div class="legend">
    <div class="legend-item"><div class="legend-swatch swatch-yellow"></div> iHerb</div>
    <div class="legend-item"><div class="legend-swatch swatch-green"></div> Top performer in metric</div>
  </div>

  <!-- ==================== SECTION 1: VERTICAL ==================== -->
  <div class="section-header">
    <div class="section-icon icon-green">üõí</div>
    <div class="section-title">Vertical Benchmark</div>
    <div class="section-desc">Retail & E-Commerce ¬∑ Last 30 days</div>
  </div>

  <div class="table-wrap">
    <table id="t1">
      <thead>
        <tr>
          <th style="width:42px">#</th>
          <th>Category</th>
          <th>Engaged</th>
          <th>CR</th>
          <th>AR</th>
          <th>Overall CSAT</th>
          <th>Bot CSAT</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <!-- ==================== SECTION 2: PEER ==================== -->
  <div class="section-header" style="margin-top:44px;">
    <div class="section-icon icon-blue">üåê</div>
    <div class="section-title">Peer Benchmark</div>
    <div class="section-desc">All Ada Customers ¬∑ Highest Volume ¬∑ Last 30 days</div>
  </div>

  <div class="table-wrap">
    <table id="t2">
      <thead>
        <tr>
          <th style="width:42px">#</th>
          <th>Category</th>
          <th>Engaged</th>
          <th>Containment</th>
          <th>AR%</th>
          <th>Overall CSAT</th>
          <th>Bot Only CSAT</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

  <div class="footer">
    <p>Powered by <a href="https://www.ada.cx" target="_blank">ada</a> ¬∑ Data from Ada Analytics ¬∑ Last 30 days</p>
  </div>
</div>

<script>
// Section 1 data ‚Äî Vertical Benchmark
const vertical = [
  { rank: 1, cat: "iHerb", engaged: 186322, cr: 75, ar: 60, csat: 65, botCsat: 62, isIherb: true },
  { rank: 2, cat: "Flowers, Gifts & Specialty", engaged: 89879, cr: 68, ar: 48, csat: 57, botCsat: 57 },
  { rank: 3, cat: "Sporting & Recreational Equipment", engaged: 69807, cr: 60, ar: 41, csat: 29, botCsat: 29 },
  { rank: 4, cat: "Flowers, Gifts & Specialty", engaged: 43767, cr: 93, ar: 62, csat: 27, botCsat: 27 },
  { rank: 5, cat: "Flowers, Gifts & Specialty", engaged: 38632, cr: 91, ar: 59, csat: 23, botCsat: 23 },
  { rank: 6, cat: "Record, Video & Book Stores", engaged: 36109, cr: 48, ar: 32, csat: 62, botCsat: 57 },
  { rank: 7, cat: "Flowers, Gifts & Specialty", engaged: 34197, cr: 84, ar: 54, csat: 20, botCsat: 20 },
];

// Section 2 data ‚Äî Peer Benchmark
const peers = [
  { cat: "Mobile wallet platform", engaged: 701830, cont: 95, ar: 50, csat: 75, botCsat: 75 },
  { cat: "Buy-now-pay-later", engaged: 614776, cont: 77, ar: 64, csat: null, botCsat: null },
  { cat: "Embedded fintech platform", engaged: 469102, cont: 88, ar: 68, csat: 68, botCsat: 69 },
  { cat: "Cryptocurrency exchange", engaged: 391703, cont: 100, ar: 12, csat: 100, botCsat: 100 },
  { cat: "Grocery retail chain", engaged: 369690, cont: 87, ar: 47, csat: 22, botCsat: 20 },
  { cat: "Low-cost airline", engaged: 272343, cont: 63, ar: 42, csat: 57, botCsat: 52 },
  { cat: "Mobile lending platform", engaged: 243650, cont: 54, ar: 24, csat: 84, botCsat: 84 },
  { cat: "iHerb", engaged: 181594, cont: 75, ar: 58, csat: 63, botCsat: 60, isIherb: true },
  { cat: "Not categorized", engaged: 177392, cont: 89, ar: 67, csat: 63, botCsat: 61 },
  { cat: "Digital news publisher", engaged: 176535, cont: 50, ar: 32, csat: 0, botCsat: 0 },
  { cat: "Family safety app", engaged: 160139, cont: 90, ar: 59, csat: 39, botCsat: 39 },
  { cat: "Background screening platform", engaged: 154042, cont: 87, ar: 67, csat: 52, botCsat: 47 },
  { cat: "Flag carrier airline", engaged: 151553, cont: 49, ar: 37, csat: 65, botCsat: 61 },
];

function fmtN(n) { return n.toLocaleString('en-US'); }

// Find max in a numeric array (ignoring nulls)
function findMax(arr, key) {
  let mx = -Infinity;
  arr.forEach(r => { if (r[key] !== null && r[key] !== undefined && r[key] > mx) mx = r[key]; });
  return mx;
}

// Render table 1
(function() {
  const tb = document.querySelector('#t1 tbody');
  const keys = ['engaged','cr','ar','csat','botCsat'];
  const maxes = {};
  keys.forEach(k => maxes[k] = findMax(vertical, k));

  vertical.forEach(r => {
    const isH = r.isIherb;
    const cls = isH ? ' class="row-iherb"' : '';
    const rkCls = isH ? 'rank-iherb' : '';

    let cells = `<td><span class="rank ${rkCls}">${r.rank}</span></td>`;
    cells += `<td>${isH ? '<strong>iHerb</strong>' : r.cat}</td>`;

    keys.forEach(k => {
      let val = k === 'engaged' ? fmtN(r[k]) : r[k] + '%';
      let best = r[k] === maxes[k] ? ' cell-best' : '';
      cells += `<td class="${best}">${val}</td>`;
    });

    tb.innerHTML += `<tr${cls}>${cells}</tr>`;
  });
})();

// Render table 2
(function() {
  const tb = document.querySelector('#t2 tbody');
  const keys = ['engaged','cont','ar','csat','botCsat'];
  // For CSAT cols, only count values > 0 and non-null as valid for "best"
  const maxes = {};
  keys.forEach(k => {
    if (k === 'csat' || k === 'botCsat') {
      let mx = -Infinity;
      peers.forEach(r => { if (r[k] !== null && r[k] > 0 && r[k] > mx) mx = r[k]; });
      maxes[k] = mx;
    } else {
      maxes[k] = findMax(peers, k);
    }
  });

  peers.forEach((r, i) => {
    const isH = r.isIherb;
    const cls = isH ? ' class="row-iherb"' : '';
    const rkCls = isH ? 'rank-iherb' : '';

    let cells = `<td><span class="rank ${rkCls}">${i + 1}</span></td>`;
    cells += `<td>${isH ? '<strong>iHerb</strong>' : r.cat}</td>`;

    keys.forEach(k => {
      let raw = r[k];
      let val;
      if (raw === null) {
        val = '‚Äî';
      } else if (k === 'engaged') {
        val = fmtN(raw);
      } else {
        val = raw + '%';
      }
      let best = (raw !== null && raw > 0 && raw === maxes[k]) ? ' cell-best' : '';
      cells += `<td class="${best}">${val}</td>`;
    });

    tb.innerHTML += `<tr${cls}>${cells}</tr>`;
  });
})();
</script>
</body>
</html>
