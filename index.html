<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>iHerb Ã— Ada â€“ ROI Calculator</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');

  :root {
    --iherb-green: #3B7D23;
    --iherb-green-light: #4A9B2E;
    --iherb-green-dark: #2D6119;
    --iherb-green-bg: #F0F7EC;
    --iherb-green-bg2: #E2F0DA;
    --iherb-orange: #F5A623;
    --iherb-orange-bg: #FFF8EC;
    --white: #FFFFFF;
    --gray-50: #F9FAFB;
    --gray-100: #F3F4F6;
    --gray-200: #E5E7EB;
    --gray-300: #D1D5DB;
    --gray-400: #9CA3AF;
    --gray-500: #6B7280;
    --gray-600: #4B5563;
    --gray-700: #374151;
    --gray-800: #1F2937;
    --gray-900: #111827;
    --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
    --shadow: 0 1px 3px rgba(0,0,0,0.1), 0 1px 2px rgba(0,0,0,0.06);
    --shadow-md: 0 4px 6px rgba(0,0,0,0.07), 0 2px 4px rgba(0,0,0,0.06);
    --shadow-lg: 0 10px 15px rgba(0,0,0,0.1), 0 4px 6px rgba(0,0,0,0.05);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Inter', -apple-system, sans-serif;
    background: var(--gray-50);
    color: var(--gray-900);
    min-height: 100vh;
  }

  .container {
    max-width: 1100px; margin: 0 auto; padding: 32px 24px 64px;
  }

  /* Header */
  .header {
    display: flex; align-items: center; justify-content: space-between;
    margin-bottom: 32px; flex-wrap: wrap; gap: 12px;
  }
  .header-left { display: flex; align-items: center; gap: 14px; }
  .ada-logo {
    font-size: 22px; font-weight: 800; color: var(--gray-800);
    letter-spacing: -0.5px;
  }
  .divider-pipe { color: var(--gray-300); font-size: 20px; font-weight: 300; }
  .iherb-logo {
    font-size: 20px; font-weight: 700; color: var(--iherb-green);
  }
  .badge {
    padding: 5px 14px; border-radius: 6px; font-size: 11px; font-weight: 700;
    background: var(--iherb-green); color: white;
    letter-spacing: 0.8px; text-transform: uppercase;
  }

  h1 {
    font-size: 32px; font-weight: 800; letter-spacing: -0.8px;
    color: var(--gray-900); margin-bottom: 6px;
  }
  .subtitle {
    font-size: 15px; color: var(--gray-500); line-height: 1.5;
    margin-bottom: 32px;
  }

  /* Year Selector */
  .year-selector {
    background: var(--white); border: 1px solid var(--gray-200);
    border-radius: 12px; padding: 24px; margin-bottom: 24px;
    box-shadow: var(--shadow-sm);
  }
  .year-selector label {
    display: block; font-size: 12px; font-weight: 600; text-transform: uppercase;
    letter-spacing: 0.8px; color: var(--gray-500); margin-bottom: 10px;
  }
  .year-buttons { display: flex; gap: 8px; flex-wrap: wrap; }
  .year-btn {
    padding: 10px 24px; border-radius: 8px; border: 2px solid var(--gray-200);
    background: var(--white); color: var(--gray-600); font-family: 'Inter', sans-serif;
    font-size: 15px; font-weight: 600; cursor: pointer;
    transition: all 0.2s;
  }
  .year-btn:hover { border-color: var(--iherb-green-light); color: var(--iherb-green); }
  .year-btn.active {
    background: var(--iherb-green); color: white; border-color: var(--iherb-green);
  }

  /* Metrics Grid */
  .metrics-grid {
    display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px;
    margin-bottom: 24px;
  }
  .metric-card {
    background: var(--white); border: 1px solid var(--gray-200);
    border-radius: 10px; padding: 16px; box-shadow: var(--shadow-sm);
    transition: box-shadow 0.2s;
  }
  .metric-card:hover { box-shadow: var(--shadow); }
  .metric-label {
    font-size: 11px; font-weight: 600; text-transform: uppercase;
    letter-spacing: 0.5px; color: var(--gray-400); margin-bottom: 6px;
  }
  .metric-value {
    font-size: 22px; font-weight: 800; color: var(--gray-900);
    letter-spacing: -0.5px;
  }
  .metric-value.green { color: var(--iherb-green); }

  /* Section */
  .section {
    background: var(--white); border: 1px solid var(--gray-200);
    border-radius: 12px; padding: 28px; margin-bottom: 24px;
    box-shadow: var(--shadow-sm);
  }
  .section-title {
    font-size: 16px; font-weight: 700; color: var(--gray-800); margin-bottom: 20px;
    display: flex; align-items: center; gap: 8px;
  }
  .section-title .dot {
    width: 8px; height: 8px; border-radius: 50%;
  }
  .dot-green { background: var(--iherb-green); }
  .dot-orange { background: var(--iherb-orange); }

  /* Slider */
  .slider-group { margin-bottom: 0; }
  .slider-header {
    display: flex; justify-content: space-between; align-items: baseline;
    margin-bottom: 10px;
  }
  .slider-label {
    font-size: 13px; font-weight: 500; color: var(--gray-600);
  }
  .slider-value {
    font-size: 24px; font-weight: 800; color: var(--iherb-green);
  }
  input[type="range"] {
    width: 100%; height: 8px; -webkit-appearance: none; appearance: none;
    background: var(--gray-200); border-radius: 4px; outline: none;
    cursor: pointer;
  }
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none; width: 24px; height: 24px; border-radius: 50%;
    background: var(--iherb-green); border: 3px solid white;
    box-shadow: 0 1px 4px rgba(0,0,0,0.2); cursor: pointer;
    transition: transform 0.15s;
  }
  input[type="range"]::-webkit-slider-thumb:hover { transform: scale(1.12); }
  input[type="range"]::-moz-range-thumb {
    width: 24px; height: 24px; border-radius: 50%;
    background: var(--iherb-green); border: 3px solid white;
    box-shadow: 0 1px 4px rgba(0,0,0,0.2); cursor: pointer;
  }

  /* ROI Cards */
  .roi-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 24px; }

  .roi-card {
    border-radius: 12px; padding: 28px; position: relative; overflow: hidden;
  }
  .roi-card.containment {
    background: var(--iherb-green-bg); border: 1px solid var(--iherb-green-bg2);
  }
  .roi-card.resolution {
    background: var(--iherb-orange-bg); border: 1px solid #F5DDA3;
  }
  .roi-card-label {
    font-size: 12px; font-weight: 700; text-transform: uppercase;
    letter-spacing: 0.8px; margin-bottom: 4px;
  }
  .roi-card.containment .roi-card-label { color: var(--iherb-green-dark); }
  .roi-card.resolution .roi-card-label { color: #B07D18; }
  .roi-card-subtitle {
    font-size: 12px; color: var(--gray-500); margin-bottom: 16px;
  }
  .roi-amount {
    font-size: 38px; font-weight: 800; letter-spacing: -1.5px; margin-bottom: 4px;
  }
  .roi-card.containment .roi-amount { color: var(--iherb-green-dark); }
  .roi-card.resolution .roi-amount { color: #9A6C10; }
  .roi-period { font-size: 13px; color: var(--gray-500); }

  /* Formula breakdown */
  .formula {
    background: var(--gray-50); border: 1px solid var(--gray-200);
    border-radius: 8px; padding: 14px 18px; margin-top: 16px;
    font-size: 13px; color: var(--gray-600); font-family: 'Inter', monospace;
    line-height: 1.8;
  }
  .formula strong { color: var(--gray-800); }

  /* Summary bar */
  .summary-bar {
    background: var(--iherb-green); border-radius: 12px; padding: 28px 32px;
    display: flex; align-items: center; justify-content: space-around;
    flex-wrap: wrap; gap: 20px; margin-bottom: 24px;
  }
  .summary-item { text-align: center; }
  .summary-value {
    font-size: 30px; font-weight: 800; color: white; letter-spacing: -1px;
  }
  .summary-label {
    font-size: 11px; font-weight: 600; text-transform: uppercase;
    letter-spacing: 0.6px; color: rgba(255,255,255,0.7); margin-top: 2px;
  }

  /* Placeholder state */
  .placeholder {
    text-align: center; padding: 60px 20px; color: var(--gray-400);
  }
  .placeholder-icon { font-size: 40px; margin-bottom: 12px; }
  .placeholder-text { font-size: 15px; }

  /* Footer */
  .footer {
    text-align: center; padding-top: 24px; border-top: 1px solid var(--gray-200);
  }
  .footer p { font-size: 12px; color: var(--gray-400); }
  .footer a { color: var(--iherb-green); text-decoration: none; font-weight: 600; }

  @media (max-width: 768px) {
    .metrics-grid { grid-template-columns: repeat(2, 1fr); }
    .roi-grid { grid-template-columns: 1fr; }
    h1 { font-size: 24px; }
    .summary-bar { flex-direction: column; }
  }
</style>
</head>
<body>
<div class="container">

  <!-- Header -->
  <div class="header">
    <div class="header-left">
      <div class="ada-logo">ada</div>
      <span class="divider-pipe">|</span>
      <span class="iherb-logo">iHerb</span>
    </div>
    <div class="badge">ROI Calculator</div>
  </div>

  <h1>AI Agent ROI Calculator</h1>
  <p class="subtitle">Select a year to load iHerb's historical performance metrics from Ada Analytics, then adjust the Automated Resolution rate to model ROI.</p>

  <!-- Year Selector -->
  <div class="year-selector">
    <label>Select Year</label>
    <div class="year-buttons" id="yearButtons">
      <button class="year-btn" onclick="selectYear('2023')">2023</button>
      <button class="year-btn" onclick="selectYear('2024')">2024</button>
      <button class="year-btn" onclick="selectYear('2025')">2025 YTD</button>
    </div>
  </div>

  <!-- Content area -->
  <div id="mainContent">
    <div class="placeholder">
      <div class="placeholder-icon">ðŸ“Š</div>
      <div class="placeholder-text">Select a year above to load iHerb's performance data</div>
    </div>
  </div>

  <div class="footer">
    <p>Powered by <a href="https://www.ada.cx" target="_blank">ada</a> Â· Data sourced from Ada Analytics (Omni)</p>
  </div>
</div>

<script>
// Real data from Omni Analytics
const DATA = {
  "2023": {
    engaged: 1078096,
    resolutionRate: 0.29996350808904026,
    botCSAT: 0.46,
    overallCSAT: 0.54,
    agentCSAT: 0.91,
    contained: 866250,
    containmentRate: 0.8034998738516792,
    aht: 4210
  },
  "2024": {
    engaged: 1254343,
    resolutionRate: 0.31093546553210216,
    botCSAT: 0.55,
    overallCSAT: 0.63,
    agentCSAT: 0.91,
    contained: 945438,
    containmentRate: 0.753731634808023,
    aht: 21057
  },
  "2025": {
    engaged: 571879,
    resolutionRate: 0.2444711164455113,
    botCSAT: 0.55,
    overallCSAT: 0.63,
    agentCSAT: 0.93,
    contained: 399489,
    containmentRate: 0.6985551139314435,
    aht: 11292
  }
};

const CPC = 2.61;
let selectedYear = null;
let arOverride = null;

function fmt(n) {
  if (Math.abs(n) >= 1e6) return '$' + (n / 1e6).toFixed(2) + 'M';
  if (Math.abs(n) >= 1e3) return '$' + (n / 1e3).toFixed(1) + 'K';
  return '$' + n.toFixed(0);
}

function fmtNum(n) {
  return n.toLocaleString('en-US');
}

function fmtPct(n) {
  return (n * 100).toFixed(1) + '%';
}

function fmtTime(s) {
  if (s >= 3600) return (s / 3600).toFixed(1) + 'h';
  if (s >= 60) return (s / 60).toFixed(1) + 'm';
  return s + 's';
}

function selectYear(y) {
  selectedYear = y;
  arOverride = null;
  document.querySelectorAll('.year-btn').forEach(b => b.classList.remove('active'));
  event.target.classList.add('active');
  render();
}

function onSliderChange(val) {
  arOverride = parseFloat(val) / 100;
  calc();
}

function render() {
  const d = DATA[selectedYear];
  if (!d) return;

  const ar = arOverride !== null ? arOverride : d.resolutionRate;
  const arPct = Math.round(ar * 100);

  document.getElementById('mainContent').innerHTML = `
    <!-- Metrics from Omni -->
    <div class="metrics-grid">
      <div class="metric-card">
        <div class="metric-label">Engaged Conversations</div>
        <div class="metric-value">${fmtNum(d.engaged)}</div>
      </div>
      <div class="metric-card">
        <div class="metric-label">Contained Conversations</div>
        <div class="metric-value">${fmtNum(d.contained)}</div>
      </div>
      <div class="metric-card">
        <div class="metric-label">Containment Rate</div>
        <div class="metric-value green">${fmtPct(d.containmentRate)}</div>
      </div>
      <div class="metric-card">
        <div class="metric-label">Resolution Rate (AR%)</div>
        <div class="metric-value green">${fmtPct(d.resolutionRate)}</div>
      </div>
      <div class="metric-card">
        <div class="metric-label">Bot CSAT</div>
        <div class="metric-value">${fmtPct(d.botCSAT)}</div>
      </div>
      <div class="metric-card">
        <div class="metric-label">Overall CSAT</div>
        <div class="metric-value">${fmtPct(d.overallCSAT)}</div>
      </div>
      <div class="metric-card">
        <div class="metric-label">Agent CSAT</div>
        <div class="metric-value">${fmtPct(d.agentCSAT)}</div>
      </div>
      <div class="metric-card">
        <div class="metric-label">Avg Handle Time</div>
        <div class="metric-value">${fmtTime(d.aht)}</div>
      </div>
    </div>

    <!-- Fixed Cost -->
    <div class="section" style="padding:16px 28px; margin-bottom:24px; display:flex; align-items:center; justify-content:space-between;">
      <span style="font-size:13px; font-weight:600; color:var(--gray-500); text-transform:uppercase; letter-spacing:0.5px;">Fixed Cost Per Ticket</span>
      <span style="font-size:22px; font-weight:800; color:var(--gray-900);">$${CPC.toFixed(2)}</span>
    </div>

    <!-- AR Slider -->
    <div class="section">
      <div class="section-title"><span class="dot dot-green"></span> Adjust Automated Resolution Rate</div>
      <div class="slider-group">
        <div class="slider-header">
          <span class="slider-label">Model a different AR% to see projected ROI impact</span>
          <span class="slider-value" id="arDisplay">${arPct}%</span>
        </div>
        <input type="range" id="arSlider" min="0" max="100" value="${arPct}"
          oninput="document.getElementById('arDisplay').textContent=this.value+'%'; onSliderChange(this.value)">
        <div style="display:flex; justify-content:space-between; margin-top:6px;">
          <span style="font-size:11px; color:var(--gray-400);">0%</span>
          <span style="font-size:11px; color:var(--gray-400);">Actual: ${fmtPct(d.resolutionRate)}</span>
          <span style="font-size:11px; color:var(--gray-400);">100%</span>
        </div>
      </div>
    </div>

    <!-- ROI Cards -->
    <div class="roi-grid" id="roiCards"></div>

    <!-- Summary -->
    <div class="summary-bar" id="summaryBar"></div>
  `;

  calc();
}

function calc() {
  const d = DATA[selectedYear];
  if (!d) return;

  const ar = arOverride !== null ? arOverride : d.resolutionRate;

  // 1) Containment-based ROI
  const containmentROI = d.engaged * d.containmentRate * CPC;

  // 2) Resolution-based ROI
  const resolvedConvos = d.engaged * ar;
  const resolutionROI = resolvedConvos * CPC;

  const totalROI = containmentROI + resolutionROI;

  document.getElementById('roiCards').innerHTML = `
    <div class="roi-card containment">
      <div class="roi-card-label">Containment-Based ROI</div>
      <div class="roi-card-subtitle">Engaged Ã— Containment Rate Ã— CPC</div>
      <div class="roi-amount">${fmt(containmentROI)}</div>
      <div class="roi-period">${selectedYear} ${selectedYear === '2025' ? 'YTD' : 'Annual'}</div>
      <div class="formula">
        <strong>${fmtNum(d.engaged)}</strong> engaged Ã— <strong>${fmtPct(d.containmentRate)}</strong> containment Ã— <strong>$${CPC.toFixed(2)}</strong> CPC<br>
        = <strong>${fmtNum(Math.round(d.engaged * d.containmentRate))}</strong> contained convos Ã— $${CPC.toFixed(2)} = <strong>${fmt(containmentROI)}</strong>
      </div>
    </div>
    <div class="roi-card resolution">
      <div class="roi-card-label">Resolution-Based ROI</div>
      <div class="roi-card-subtitle">Engaged Ã— Resolution Rate Ã— CPC</div>
      <div class="roi-amount">${fmt(resolutionROI)}</div>
      <div class="roi-period">${selectedYear} ${selectedYear === '2025' ? 'YTD' : 'Annual'} Â· AR at ${fmtPct(ar)}</div>
      <div class="formula">
        <strong>${fmtNum(d.engaged)}</strong> engaged Ã— <strong>${fmtPct(ar)}</strong> AR% Ã— <strong>$${CPC.toFixed(2)}</strong> CPC<br>
        = <strong>${fmtNum(Math.round(resolvedConvos))}</strong> resolved convos Ã— $${CPC.toFixed(2)} = <strong>${fmt(resolutionROI)}</strong>
      </div>
    </div>
  `;

  document.getElementById('summaryBar').innerHTML = `
    <div class="summary-item">
      <div class="summary-value">${fmtNum(d.engaged)}</div>
      <div class="summary-label">Engaged Conversations</div>
    </div>
    <div class="summary-item">
      <div class="summary-value">${fmt(containmentROI)}</div>
      <div class="summary-label">Containment ROI</div>
    </div>
    <div class="summary-item">
      <div class="summary-value">${fmt(resolutionROI)}</div>
      <div class="summary-label">Resolution ROI</div>
    </div>
    <div class="summary-item">
      <div class="summary-value">${fmt(totalROI)}</div>
      <div class="summary-label">Combined ROI</div>
    </div>
  `;
}
</script>
</body>
</html>
